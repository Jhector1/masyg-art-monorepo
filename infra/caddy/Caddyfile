{
  email admin@ziledigital.com
  debug
  acme_ca https://acme-staging-v02.api.letsencrypt.org/directory
}

(common) {
  encode zstd gzip
  header {
    Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    X-Frame-Options "SAMEORIGIN"
    X-Content-Type-Options "nosniff"
    Referrer-Policy "strict-origin-when-cross-origin"
  }
}

client1.ziledigital.com {
  import common
  reverse_proxy ziledigital-app:3003
}

client1.jeanyveshector.com {
  import common
  reverse_proxy jeanyvesart-app:3001
}

admin.ziledigital.com {
  # Emit request/TLS logs to stderr so we can see handshake/issuer activity
  log {
    output stderr
    level DEBUG
  }

  # Explicitly tell Caddy to use ACME (staging) for this host
  tls {
    issuer acme {
      ca https://acme-staging-v02.api.letsencrypt.org/directory
      email admin@ziledigital.com
    }
  }

  import common
  reverse_proxy admin-app:3002
}

client1.masyglink.com {
  import common
  reverse_proxy masygextractor-app:5000
}
